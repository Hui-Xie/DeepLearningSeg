=============training from sratch============
Program ID: 1993

Program command: 
 ['TrainSegV3d_ROI.py', '/home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI', '1', '/home/hxie1/data/OvarianCancerCT/primaryROI1_1_3/nrrd_npy', '/home/hxie1/data/OvarianCancerCT/primaryROI1_1_3/labels_npy', '0', '3,2,1']

Major program changes: 
      1  3D V model for primary cancer ROI;
      2  Uniform ROI size: 51*171*171 in z,y,x directon;
      3  Total 36 patient data, in which training data 24 patients, validation 6 patients, and test 6 patients;
      4  all 36 patients data have 50-80% 3D label;
      5  Dice coefficient is 3D dice coefficient against corresponding 3D ground truth;
      6  training data augmentation in the fly: affine in XY plane, translation in Z direction;
      7  In the bottle neck of V model, the latent vector has size of 512*2*9*9;
      Sep 16th, 2019:
      1   add dynamic loss weight according trainin  data;
      2   refine learning rate decay.
      Sep 21st, 2019
      1   add improved Boundary Loss2, and inherit the previous learningrate of network of pure CELoss;
      Sep 23rd, 2019:
      1   improve mean of boundary loss limited on the A,B regions;
      2   use log(segProb) instead of segProb in the boudary loss;
      3   CrossEntropy weight reduces 0.01 per 5 epochs from 1 to 0.01, while boundary Loss weight increase 0.01 per 5 epochs from 0.01 to 1. 
      Sep 24th, 2019
      1   Use boundaryLoss1, which is considering the whole volume. 
      Sep 25th, 2019
      1   use boundaryLoss3, which is a stronger gradient signal to improve loss.
      2   unbalanced weight for class is applied on logP,and just use boundaryLoss3 with CELoss.
      3   use CELoss and boundaryLoss together.
      4   Use truncated DistanceCrossEntropy Loss alone;
      5   change LRScheduler into reduce into Plateau with initial LR=0.1
      Sep 26th, 2019
      1   Add one layer in the bottom of V model;
      2   Add residual connnection in each layer;
      Sep 30th, 2019
      1   With size-reduced ROI of size 51*149*149;
      2   reduce the translation of data augmentation;
      3   reduce all data into 35 patients, excluding a very blur patient.
      Oct 5th, 2019
      1   use uniform physical size 147mm*147mm*147mm, input pixel size: 49*147*147 with spacing size 3mm*1mm*1mm;
      2   change V model with inputsize 49*147*147
      Oct 6th, 2019
      1   add filter number to 48 at the first layer. 
      Oct 7th, 2019
      1   restore to 32 of number of filters in the first layer;
      2   add bottom number of filters to 1024, and keep down sample and add filter number together. 
      Oct 8th, 2019
      1   discard the cancer with size exceeding 147mm*147mm*147mm; Now remains 29 patients data; 
      Oct 9th, 209
      1   In the first layer of V model, remove the residual link; 
           with the residula link at first layer: Tr dice:54%, Validation Dice 27%, Test Dice 56%;  Not good.
      2   the final output layer, change into 1*1*1 convolution, instead of 3*3*3 convolution;
          
         

Discarded changes:                  
          

Program starting Time: 2019-10-09 09:30:34.263618
Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20191009_093034

Info: this is the 0th fold leave for test in the 6-fold cross-validation.

Info: batchSize = 6

Net parameters is saved in  /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20191009_093034.
6-fold cross validation: the 0th fold is for test, the 1th fold is for validation, remaining folds are for training.

training dataset: total 19 image files.

validation dataset: total 5 image files.

test dataset: total 5 image files.
Total 19 training files  extracted from /home/hxie1/data/OvarianCancerCT/primaryROI1_1_3/labels_npy
0 has 18433812 elements, with a rate of  0.9162854777808447 
1 has 1684167 elements, with a rate of  0.08371452221915532 
loss weight = tensor([ 1.0000, 10.9454])
Network has total 113,191,074 parameters.


************** Table of Training Log **************
Epoch	LearningRate		TrainingLoss	Dice		ValidationLoss	Dice		TestLoss	Dice
0	1.0000e-02		17.4422		0.14532		146.6506		0.00003		260.2148		0.00000
5	1.0000e-02		9.9617		0.10303		7.6285		0.05980		11.8896		0.30303
10	1.0000e-02		7.3623		0.36359		6.6902		0.17081		7.3943		0.29363
15	1.0000e-02		6.0080		0.35712		14.4224		0.11420		14.7156		0.21638
20	1.0000e-02		5.1094		0.43034		6.1032		0.18779		5.8333		0.35573
25	1.0000e-02		4.6473		0.42107		3.8081		0.18815		4.7301		0.44134
30	1.0000e-02		5.4922		0.36013		4.1819		0.20886		4.4963		0.37566
35	1.0000e-02		4.1668		0.44695		4.6195		0.22315		3.1377		0.47564
40	1.0000e-02		6.3586		0.35386		4.9956		0.23110		5.6365		0.36498
45	1.0000e-02		7.3482		0.37701		15.6647		0.04417		18.8227		0.27470
50	1.0000e-02		6.3076		0.44071		2.3654		0.30483		2.7911		0.52034
55	1.0000e-02		4.0968		0.46676		2.5167		0.24596		3.3095		0.48802
60	1.0000e-02		3.2181		0.44825		3.2422		0.26038		4.3740		0.48517
65	1.0000e-02		3.8880		0.43648		3.2640		0.23472		3.7258		0.43156
70	1.0000e-02		4.7539		0.41114		2.7907		0.37255		2.3527		0.54164
75	1.0000e-02		3.7378		0.52434		2.2083		0.25800		3.0518		0.48662
80	1.0000e-02		3.9239		0.43269		2.3359		0.29352		3.2803		0.49431
85	1.0000e-02		3.2481		0.46114		3.2235		0.24430		3.6691		0.42039
90	1.0000e-02		4.2729		0.42313		3.0706		0.25555		2.9336		0.46214
95	1.0000e-02		4.1393		0.47320		2.8794		0.25635		4.0619		0.46289
100	1.0000e-02		3.6512		0.49629		2.7156		0.23630		2.7160		0.49581
105	1.0000e-02		2.8822		0.50516		2.1646		0.31060		3.6584		0.56758
110	1.0000e-02		3.5957		0.48722		2.0025		0.28889		2.5805		0.53382
115	1.0000e-02		3.4265		0.52746		3.8937		0.25060		2.4314		0.61617
120	1.0000e-02		2.6417		0.53288		2.5885		0.27797		2.7516		0.57068
125	1.0000e-02		2.6900		0.55067		3.4813		0.19899		3.9507		0.53869
130	1.0000e-02		2.2274		0.56509		2.4023		0.27456		2.4340		0.56803
135	1.0000e-02		3.1521		0.45655		3.5459		0.20340		3.2730		0.47779
140	1.0000e-02		3.3118		0.50796		2.7995		0.17610		3.0908		0.58790
145	1.0000e-02		2.3817		0.54079		3.6248		0.17969		2.6530		0.61082
150	1.0000e-02		4.0998		0.41036		4.8959		0.11144		4.7168		0.40821
155	1.0000e-02		3.4268		0.52884		2.2508		0.24155		3.3862		0.45488
160	1.0000e-02		3.1391		0.50773		2.3252		0.25255		3.1732		0.53119
165	1.0000e-03		2.3701		0.54713		2.6930		0.25352		2.9613		0.59767
170	1.0000e-03		3.6356		0.56208		2.3351		0.26976		2.7270		0.60816
175	1.0000e-03		2.7724		0.55482		2.5845		0.27917		2.5934		0.61581
180	1.0000e-03		2.6715		0.55996		2.8739		0.28070		2.9073		0.62480
185	1.0000e-03		3.4020		0.54302		2.4458		0.27203		2.6905		0.60162
190	1.0000e-03		2.0967		0.60248		2.3952		0.28840		2.7528		0.61482
195	1.0000e-03		2.3072		0.56476		2.5701		0.27038		2.8508		0.57512
200	1.0000e-03		2.2124		0.56396		2.4056		0.26667		2.7061		0.56768
205	1.0000e-03		2.0771		0.61248		2.6137		0.27047		3.0212		0.55909
210	1.0000e-03		2.2273		0.59250		2.5248		0.27727		3.0340		0.59049
215	1.0000e-03		2.6287		0.59338		2.6807		0.26529		2.6939		0.62122
220	1.0000e-04		1.7913		0.59098		3.6445		0.24956		3.0005		0.63190
225	1.0000e-04		3.6107		0.57506		3.4333		0.24763		3.0405		0.62095
230	1.0000e-04		2.0076		0.58961		2.8290		0.27697		2.7031		0.59545
235	1.0000e-04		1.9747		0.59363		2.9974		0.26319		3.0507		0.57414
240	1.0000e-04		2.5806		0.58156		2.5310		0.27613		2.6978		0.56245
245	1.0000e-04		2.9334		0.60441		3.0188		0.25956		3.1120		0.57115
250	1.0000e-04		2.0311		0.58812		2.6093		0.29266		2.7562		0.59426
255	1.0000e-04		1.7060		0.61461		3.2584		0.24699		3.4362		0.56577
260	1.0000e-04		2.1564		0.60581		3.2827		0.25285		3.3546		0.59204
265	1.0000e-04		2.5317		0.59318		2.6775		0.27759		2.6714		0.60173
270	1.0000e-04		2.1150		0.58799		2.8858		0.26020		2.8162		0.58356
275	1.0000e-05		1.9212		0.57927		2.9443		0.25884		2.9247		0.58995
280	1.0000e-05		2.1296		0.59700		3.0539		0.24795		3.0309		0.57220
285	1.0000e-05		2.0120		0.60910		3.3743		0.25833		2.8957		0.61786
290	1.0000e-05		1.9808		0.63897		3.0009		0.26627		3.1547		0.57227
295	1.0000e-05		2.1737		0.60503		2.8052		0.26463		2.7552		0.59441
300	1.0000e-05		2.5854		0.57306		3.1838		0.25095		3.1200		0.57548
305	1.0000e-05		1.9740		0.61378		2.5086		0.28875		2.6538		0.58252
310	1.0000e-05		1.7332		0.59164		2.7023		0.27364		2.9038		0.57726
315	1.0000e-05		2.0299		0.60506		3.0324		0.25289		3.0961		0.56412
320	1.0000e-05		2.1292		0.60696		2.6791		0.26884		2.8575		0.57027
325	1.0000e-05		2.0572		0.62983		3.0191		0.25875		3.0166		0.59361
330	1.0000e-06		2.2047		0.59355		2.7613		0.27244		2.7826		0.60729
335	1.0000e-06		3.0266		0.58064		3.1448		0.25651		3.1838		0.57603
340	1.0000e-06		2.2452		0.60289		2.8864		0.25657		2.9737		0.56774
345	1.0000e-06		2.1875		0.59811		3.0323		0.25358		2.8658		0.58503
350	1.0000e-06		1.9731		0.61258		2.8686		0.25898		2.8677		0.58185
355	1.0000e-06		2.0255		0.60305		2.5195		0.27705		2.7716		0.57314
360	1.0000e-06		2.0034		0.57938		2.9751		0.25326		3.0698		0.57057
365	1.0000e-06		2.1595		0.57984		2.6596		0.27072		2.9233		0.56656
370	1.0000e-06		1.6277		0.58837		2.8785		0.25828		2.8547		0.59604
375	1.0000e-06		2.1125		0.59461		2.8984		0.26412		2.8258		0.58194
380	1.0000e-06		1.9873		0.61459		2.8654		0.26241		2.8541		0.59024
385	1.0000e-07		2.3557		0.60510		2.6602		0.27076		2.8219		0.57219
390	1.0000e-07		2.0109		0.60466		2.6351		0.26356		2.8457		0.57348
395	1.0000e-07		2.0197		0.60368		2.8120		0.25476		3.1426		0.54910
400	1.0000e-07		1.5833		0.62971		2.4761		0.28812		2.7252		0.58616
405	1.0000e-07		2.0715		0.59891		2.6081		0.27132		2.8585		0.56200
410	1.0000e-07		2.2669		0.62828		3.1617		0.25094		3.2063		0.58805
415	1.0000e-07		2.6303		0.57310		3.1580		0.24867		3.0544		0.59003
420	1.0000e-07		1.9903		0.59591		2.6060		0.27460		2.9311		0.56069
425	1.0000e-07		1.9447		0.58624		2.9101		0.25292		3.1749		0.55655
430	1.0000e-07		1.6617		0.59395		2.8260		0.25742		3.0696		0.56219
435	1.0000e-07		1.7401		0.58705		2.6617		0.26631		2.9249		0.56511
440	1.0000e-08		2.4598		0.57893		3.1489		0.25637		2.8829		0.60674
445	1.0000e-08		1.9792		0.63209		2.6518		0.27339		2.8277		0.58119
450	1.0000e-08		2.3779		0.60069		2.3799		0.29493		2.6197		0.58575
455	1.0000e-08		2.4345		0.56268		2.7698		0.26686		2.9481		0.57836
460	1.0000e-08		1.9813		0.61376		2.9831		0.25784		2.9662		0.58810
465	1.0000e-08		1.7380		0.60667		2.8354		0.26056		2.9197		0.58387
470	1.0000e-08		2.0109		0.57859		2.5516		0.28576		2.7956		0.57147
475	1.0000e-08		3.8649		0.60953		2.9464		0.26188		2.9374		0.60082
480	1.0000e-08		1.6303		0.62273		2.6712		0.26929		2.7819		0.58117
485	1.0000e-08		1.6697		0.57266		2.8589		0.25725		2.9192		0.57879
490	1.0000e-08		1.8633		0.61735		2.5712		0.28342		2.7418		0.57421
495	1.0000e-08		2.1121		0.61759		2.7213		0.26167		2.9049		0.56184
500	1.0000e-08		1.5395		0.58437		2.9147		0.25813		2.9692		0.58530
505	1.0000e-08		1.8658		0.61274		2.7291		0.26121		2.9224		0.58035
510	1.0000e-08		1.9340		0.58252		2.5947		0.26979		2.8663		0.55755
515	1.0000e-08		1.8687		0.59980		2.6903		0.28458		2.7024		0.59757
520	1.0000e-08		2.4666		0.60976		2.5442		0.28139		2.7160		0.57344
525	1.0000e-08		1.9605		0.62198		2.4844		0.28884		2.6773		0.58172
530	1.0000e-08		2.0447		0.60477		2.4369		0.29096		2.5955		0.59735
535	1.0000e-08		2.2539		0.58174		3.0898		0.24782		3.0232		0.58720
540	1.0000e-08		2.7433		0.55816		2.8548		0.26638		2.8993		0.58817
545	1.0000e-08		1.8351		0.59225		2.8452		0.26747		2.8595		0.59254
550	1.0000e-08		2.2898		0.57677		2.6266		0.26807		2.6561		0.57452
555	1.0000e-08		1.8672		0.59231		2.7299		0.25943		3.0360		0.55303
560	1.0000e-08		2.1515		0.61347		2.8721		0.27254		2.7595		0.60433
565	1.0000e-08		1.9096		0.60024		3.0019		0.25376		3.0382		0.57766
570	1.0000e-08		2.1756		0.58719		3.3846		0.24995		3.4807		0.55755
575	1.0000e-08		2.0758		0.59487		3.1648		0.25549		3.3547		0.55939
580	1.0000e-08		2.2942		0.58217		2.6583		0.27609		2.8895		0.56328
585	1.0000e-08		1.7331		0.59940		2.4880		0.27343		2.8380		0.55650
590	1.0000e-08		1.7440		0.60154		2.5491		0.28096		2.7182		0.58191
595	1.0000e-08		2.4034		0.62233		2.6407		0.27093		2.7410		0.58004
600	1.0000e-08		2.1184		0.60474		2.7518		0.27589		2.7375		0.59644
605	1.0000e-08		2.0670		0.63276		2.9274		0.27156		2.8481		0.60348
610	1.0000e-08		1.9480		0.58981		2.7972		0.26512		3.0232		0.57202
615	1.0000e-08		1.9619		0.57268		3.0491		0.24812		3.1468		0.55923
620	1.0000e-08		1.7936		0.59454		2.8331		0.26065		3.0698		0.56620
625	1.0000e-08		2.6317		0.60653		2.8543		0.26809		2.9649		0.57627
630	1.0000e-08		2.2641		0.58023		3.1539		0.25433		3.1811		0.57996
635	1.0000e-08		2.0945		0.57559		2.7662		0.27006		2.8163		0.58463
640	1.0000e-08		2.8809		0.60472		3.6938		0.24966		3.0313		0.61938
645	1.0000e-08		1.8601		0.59866		2.8380		0.26014		2.7858		0.59167
650	1.0000e-08		2.1595		0.57657		2.7225		0.25885		3.0313		0.56167
655	1.0000e-08		2.1054		0.58807		2.9294		0.26115		2.8789		0.59673
660	1.0000e-08		1.7903		0.61764		2.8668		0.26596		2.8866		0.58998
665	1.0000e-08		1.7382		0.63650		2.8721		0.26371		3.0773		0.57705
670	1.0000e-08		1.7264		0.62784		2.4686		0.29553		2.6276		0.60194
675	1.0000e-08		2.3292		0.61117		3.1516		0.25294		2.8438		0.60605
680	1.0000e-08		2.2575		0.60634		2.4917		0.28131		2.6489		0.57161
685	1.0000e-08		2.0119		0.61882		2.5408		0.27739		2.8422		0.56261
690	1.0000e-08		1.8874		0.60846		2.4372		0.29719		2.5412		0.59662
695	1.0000e-08		2.0442		0.59566		3.1906		0.24296		3.5125		0.53412
700	1.0000e-08		1.9729		0.60158		3.0438		0.25704		2.9479		0.59891
705	1.0000e-08		2.2741		0.59567		2.5632		0.28112		2.7293		0.57692
710	1.0000e-08		2.4695		0.60181		2.6852		0.26903		2.7693		0.58784
715	1.0000e-08		2.2066		0.62393		2.5993		0.29110		2.7098		0.59788
720	1.0000e-08		2.0291		0.59622		3.2333		0.26760		3.0805		0.61132
725	1.0000e-08		2.3442		0.59088		2.7067		0.27164		2.5809		0.60578
730	1.0000e-08		1.7962		0.60012		3.0397		0.25134		2.9044		0.59322
735	1.0000e-08		2.0370		0.58975		2.7473		0.26479		2.8531		0.58075
740	1.0000e-08		2.0414		0.60187		2.6502		0.26580		2.7174		0.59389
745	1.0000e-08		1.7202		0.61897		2.7220		0.26269		2.8551		0.56144
750	1.0000e-08		1.9630		0.60959		2.5524		0.27375		2.7839		0.56019
755	1.0000e-08		1.6984		0.55283		2.5630		0.26663		2.9695		0.55924
760	1.0000e-08		2.4149		0.58499		2.6908		0.26877		2.9445		0.56075
765	1.0000e-08		1.7854		0.61696		2.7372		0.26858		2.7542		0.58702
770	1.0000e-08		1.9799		0.61119		2.8288		0.25962		3.1756		0.54645
775	1.0000e-08		1.8025		0.61911		2.2914		0.29650		2.6635		0.58614
780	1.0000e-08		2.2875		0.60156		2.9821		0.26306		3.0252		0.58582
785	1.0000e-08		1.9741		0.61971		2.8280		0.27278		2.7541		0.61321
790	1.0000e-08		2.2228		0.63259		2.6685		0.26467		2.8315		0.58270
795	1.0000e-08		2.6642		0.59352		2.5904		0.27993		2.8470		0.57834
800	1.0000e-08		1.7232		0.59954		2.6480		0.27068		2.8782		0.55953
805	1.0000e-08		2.6877		0.63138		2.5875		0.27850		2.7377		0.59338
810	1.0000e-08		2.1107		0.60431		2.8639		0.26973		3.0198		0.58848
815	1.0000e-08		2.0676		0.61756		3.0362		0.25260		3.1443		0.56149
820	1.0000e-08		2.1369		0.60596		2.8280		0.26386		2.8984		0.57978
825	1.0000e-08		1.7100		0.62326		2.7823		0.26588		2.8553		0.57895
830	1.0000e-08		1.7429		0.59163		2.8395		0.26543		3.0875		0.56284
835	1.0000e-08		1.7970		0.63449		2.4644		0.28945		2.6778		0.58869
840	1.0000e-08		2.1458		0.58588		2.5047		0.27708		2.7724		0.55410
