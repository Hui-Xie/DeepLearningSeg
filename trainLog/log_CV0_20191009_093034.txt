=============training from sratch============
Program ID: 1993

Program command: 
 ['TrainSegV3d_ROI.py', '/home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI', '1', '/home/hxie1/data/OvarianCancerCT/primaryROI1_1_3/nrrd_npy', '/home/hxie1/data/OvarianCancerCT/primaryROI1_1_3/labels_npy', '0', '3,2,1']

Major program changes: 
      1  3D V model for primary cancer ROI;
      2  Uniform ROI size: 51*171*171 in z,y,x directon;
      3  Total 36 patient data, in which training data 24 patients, validation 6 patients, and test 6 patients;
      4  all 36 patients data have 50-80% 3D label;
      5  Dice coefficient is 3D dice coefficient against corresponding 3D ground truth;
      6  training data augmentation in the fly: affine in XY plane, translation in Z direction;
      7  In the bottle neck of V model, the latent vector has size of 512*2*9*9;
      Sep 16th, 2019:
      1   add dynamic loss weight according trainin  data;
      2   refine learning rate decay.
      Sep 21st, 2019
      1   add improved Boundary Loss2, and inherit the previous learningrate of network of pure CELoss;
      Sep 23rd, 2019:
      1   improve mean of boundary loss limited on the A,B regions;
      2   use log(segProb) instead of segProb in the boudary loss;
      3   CrossEntropy weight reduces 0.01 per 5 epochs from 1 to 0.01, while boundary Loss weight increase 0.01 per 5 epochs from 0.01 to 1. 
      Sep 24th, 2019
      1   Use boundaryLoss1, which is considering the whole volume. 
      Sep 25th, 2019
      1   use boundaryLoss3, which is a stronger gradient signal to improve loss.
      2   unbalanced weight for class is applied on logP,and just use boundaryLoss3 with CELoss.
      3   use CELoss and boundaryLoss together.
      4   Use truncated DistanceCrossEntropy Loss alone;
      5   change LRScheduler into reduce into Plateau with initial LR=0.1
      Sep 26th, 2019
      1   Add one layer in the bottom of V model;
      2   Add residual connnection in each layer;
      Sep 30th, 2019
      1   With size-reduced ROI of size 51*149*149;
      2   reduce the translation of data augmentation;
      3   reduce all data into 35 patients, excluding a very blur patient.
      Oct 5th, 2019
      1   use uniform physical size 147mm*147mm*147mm, input pixel size: 49*147*147 with spacing size 3mm*1mm*1mm;
      2   change V model with inputsize 49*147*147
      Oct 6th, 2019
      1   add filter number to 48 at the first layer. 
      Oct 7th, 2019
      1   restore to 32 of number of filters in the first layer;
      2   add bottom number of filters to 1024, and keep down sample and add filter number together. 
      Oct 8th, 2019
      1   discard the cancer with size exceeding 147mm*147mm*147mm; Now remains 29 patients data; 
      Oct 9th, 209
      1   In the first layer of V model, remove the residual link; 
           with the residula link at first layer: Tr dice:54%, Validation Dice 27%, Test Dice 56%;  Not good.
      2   the final output layer, change into 1*1*1 convolution, instead of 3*3*3 convolution;
          
         

Discarded changes:                  
          

Program starting Time: 2019-10-09 09:30:34.263618
Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20191009_093034

Info: this is the 0th fold leave for test in the 6-fold cross-validation.

Info: batchSize = 6

Net parameters is saved in  /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20191009_093034.
6-fold cross validation: the 0th fold is for test, the 1th fold is for validation, remaining folds are for training.

training dataset: total 19 image files.

validation dataset: total 5 image files.

test dataset: total 5 image files.
Total 19 training files  extracted from /home/hxie1/data/OvarianCancerCT/primaryROI1_1_3/labels_npy
0 has 18433812 elements, with a rate of  0.9162854777808447 
1 has 1684167 elements, with a rate of  0.08371452221915532 
loss weight = tensor([ 1.0000, 10.9454])
Network has total 113,191,074 parameters.


************** Table of Training Log **************
Epoch	LearningRate		TrainingLoss	Dice		ValidationLoss	Dice		TestLoss	Dice
0	1.0000e-02		17.4422		0.14532		146.6506		0.00003		260.2148		0.00000
5	1.0000e-02		9.9617		0.10303		7.6285		0.05980		11.8896		0.30303
10	1.0000e-02		7.3623		0.36359		6.6902		0.17081		7.3943		0.29363
15	1.0000e-02		6.0080		0.35712		14.4224		0.11420		14.7156		0.21638
20	1.0000e-02		5.1094		0.43034		6.1032		0.18779		5.8333		0.35573
25	1.0000e-02		4.6473		0.42107		3.8081		0.18815		4.7301		0.44134
30	1.0000e-02		5.4922		0.36013		4.1819		0.20886		4.4963		0.37566
35	1.0000e-02		4.1668		0.44695		4.6195		0.22315		3.1377		0.47564
40	1.0000e-02		6.3586		0.35386		4.9956		0.23110		5.6365		0.36498
45	1.0000e-02		7.3482		0.37701		15.6647		0.04417		18.8227		0.27470
50	1.0000e-02		6.3076		0.44071		2.3654		0.30483		2.7911		0.52034
55	1.0000e-02		4.0968		0.46676		2.5167		0.24596		3.3095		0.48802
60	1.0000e-02		3.2181		0.44825		3.2422		0.26038		4.3740		0.48517
65	1.0000e-02		3.8880		0.43648		3.2640		0.23472		3.7258		0.43156
70	1.0000e-02		4.7539		0.41114		2.7907		0.37255		2.3527		0.54164
75	1.0000e-02		3.7378		0.52434		2.2083		0.25800		3.0518		0.48662
80	1.0000e-02		3.9239		0.43269		2.3359		0.29352		3.2803		0.49431
85	1.0000e-02		3.2481		0.46114		3.2235		0.24430		3.6691		0.42039
90	1.0000e-02		4.2729		0.42313		3.0706		0.25555		2.9336		0.46214
95	1.0000e-02		4.1393		0.47320		2.8794		0.25635		4.0619		0.46289
100	1.0000e-02		3.6512		0.49629		2.7156		0.23630		2.7160		0.49581
105	1.0000e-02		2.8822		0.50516		2.1646		0.31060		3.6584		0.56758
110	1.0000e-02		3.5957		0.48722		2.0025		0.28889		2.5805		0.53382
115	1.0000e-02		3.4265		0.52746		3.8937		0.25060		2.4314		0.61617
120	1.0000e-02		2.6417		0.53288		2.5885		0.27797		2.7516		0.57068
125	1.0000e-02		2.6900		0.55067		3.4813		0.19899		3.9507		0.53869
130	1.0000e-02		2.2274		0.56509		2.4023		0.27456		2.4340		0.56803
135	1.0000e-02		3.1521		0.45655		3.5459		0.20340		3.2730		0.47779
140	1.0000e-02		3.3118		0.50796		2.7995		0.17610		3.0908		0.58790
