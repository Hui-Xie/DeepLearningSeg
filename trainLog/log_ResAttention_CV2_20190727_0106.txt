Program ID: 25859

Program command: 
 ['TrainResAttentionNet.py', '/home/hxie1/temp_netParameters/OvarianCancer/ResNeXtAtten', '/home/hxie1/data/OvarianCancerCT/Extract_ps2_2_5/images_npy', '/home/hxie1/data/OvarianCancerCT/patientResponseDict.json', '2']

Major program changes: 
            ResNeXt-based Attention Net: use 2D network to implement 3D convolution without losing 3D context information. 
            0   the input is a 3D full volume without any cropping; 
            1   use slices as features channels in convolution, and use 1*1 convolution along slices to implement z direction convolution followed by 3*3 convolutino slice planes;
                it just use three cascading 2D convolutions (frist z, then xy, and z directon again) to implement 3D convolution, like in the paper of ResNeXt below.
                The benefits of this design:
                A   reduce network parameters, hoping to reducing overfitting;
                B   speed up training;
                C   this implemented 3D convolutions are all in full slices space;
            2   use group convolution to implement thick slice convolution to increase the network representation capability;
            3   Use ResNeXt-based module like Paper "Aggregated Residual Transformations for Deep Neural Networks " 
                (Link: http://openaccess.thecvf.com/content_cvpr_2017/html/Xie_Aggregated_Residual_Transformations_CVPR_2017_paper.html);
            4   use rich 2D affine transforms slice by slice and concatenate them to implement 3D data augmentation;
            5   20% data for independent test, remaining 80% data for 4-folc cross validation;
            6   add lossweight for ajusting positive sample to 3/7.

Discarded changes:                  
                  

Experiment setting:
Input CT data: maximum size 140*251*251 (zyx) of 3D numpy array with spacing size(5*2*2)
Ground truth: response binary label

Predictive Model: 

response Loss Function:  BCELogitLoss

Data:   training data has 169 patients 

Training strategy: 

          

Program starting Time: 2019-07-27 01:06:01.095509
Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/ResNeXtAtten

Info: this is the 2th fold leave for test in the 4-fold cross-validation, with 20.0% of data for independent test.

Infor: In all data of 169 files, label 0 has 51 files,
	  and label 1 has 118 files, where positive response rate = 0.6982248520710059 in full data
Infor: the independent test set has 34 files,and Training including validation Set has 135 files which will be divided into 4 folds.
In the independent test set of 34 files, 0 has 10, 1 has 24, the rate of 1s is 0.7058823529411765
In this test_2 dataset, total 34 files, where 1 has 24 with rate of 0.7058823529411765
In this train_2 dataset, total 102 files, where 1 has 71 with rate of 0.696078431372549
In this validation_2 dataset, total 33 files, where 1 has 23 with rate of 0.696969696969697
=== Network trains from scratch ====
Network has total 71,720,500 parameters.
Info: program will use 2 GPUs.
Loss Functions List: BCEWithLogitsLoss with weight of 1; 

Hints: Optimal_Result = Yes = 1,  Optimal_Result = No = 0 

Epoch	TrLoss	Accura	TPR_r	TNR_r		VaLoss	Accura	TPR_r	TNR_r		TeLoss	Accura	TPR_r	TNR_r
0	1.6042	0.5098	0.5070	0.5161		0.4071	0.3030	0.0000	1.0000		0.4071	0.2941	0.0000	1.0000
5	0.5975	0.5000	0.5211	0.4516		0.3841	0.6970	1.0000	0.0000		0.3789	0.7059	1.0000	0.0000
10	0.5415	0.6961	0.9859	0.0323		0.3931	0.6667	0.8696	0.2000		0.3833	0.6765	0.8750	0.2000
15	0.4462	0.3922	0.2254	0.7742		0.4605	0.3030	0.0000	1.0000		0.5046	0.2941	0.0000	1.0000
20	0.4393	0.5882	0.7042	0.3226		0.4048	0.3030	0.0870	0.8000		0.3904	0.3235	0.0417	1.0000
25	0.4729	0.5686	0.7465	0.1613		0.4530	0.6970	1.0000	0.0000		0.3831	0.7059	1.0000	0.0000
30	0.4781	0.3333	0.0563	0.9677		0.4102	0.6364	0.8696	0.1000		0.3795	0.6471	0.7917	0.3000
35	0.4441	0.3529	0.3944	0.2581		0.3783	0.5758	0.6957	0.3000		0.4087	0.6176	0.7500	0.3000
40	0.3768	0.5980	0.4789	0.8710		0.3953	0.4545	0.4348	0.5000		0.4077	0.5000	0.4167	0.7000
45	0.3913	0.4804	0.2817	0.9355		0.4473	0.2424	0.0435	0.7000		0.4168	0.3529	0.0833	1.0000
50	0.3695	0.5490	0.3803	0.9355		0.4331	0.3939	0.2609	0.7000		0.3863	0.5000	0.2917	1.0000
55	0.3170	0.7059	0.6479	0.8387		0.4355	0.6970	0.8261	0.4000		0.4084	0.7353	0.7500	0.7000
60	0.3373	0.7353	0.7887	0.6129		0.4762	0.6061	0.6957	0.4000		0.4800	0.7647	0.7917	0.7000
65	0.4027	0.5882	0.6056	0.5484		0.5145	0.3030	0.0870	0.8000		0.4359	0.4118	0.1667	1.0000
70	0.3535	0.7941	0.7606	0.8710		0.4444	0.6061	0.6522	0.5000		0.2966	0.8235	0.7917	0.9000
75	0.2975	0.7843	0.8310	0.6774		0.5037	0.6061	0.6087	0.6000		0.3796	0.6765	0.6667	0.7000
80	0.3278	0.8235	0.8873	0.6774		0.6853	0.5455	0.3913	0.9000		0.5315	0.5000	0.3333	0.9000
85	0.1908	0.9020	0.8873	0.9355		0.6112	0.5758	0.6087	0.5000		0.3404	0.7059	0.7917	0.5000
90	0.2121	0.8529	0.8310	0.9032		0.7230	0.5152	0.6957	0.1000		0.2938	0.7353	0.8333	0.5000
95	0.1948	0.8824	0.8873	0.8710		0.7834	0.6061	0.8696	0.0000		0.6474	0.7647	0.9583	0.3000
100	0.2617	0.9020	0.9437	0.8065		0.6307	0.5455	0.4783	0.7000		0.4374	0.5588	0.5417	0.6000
105	0.1506	0.8824	0.8873	0.8710		1.0841	0.4848	0.3043	0.9000		0.6856	0.4706	0.2917	0.9000
110	0.1109	0.9216	0.9437	0.8710		0.9115	0.4848	0.3478	0.8000		0.6121	0.5588	0.4167	0.9000
115	0.2015	0.8529	0.9014	0.7419		0.7262	0.4848	0.4348	0.6000		0.4833	0.6176	0.5833	0.7000
120	0.1288	0.9118	0.9155	0.9032		0.8526	0.5455	0.4783	0.7000		0.6942	0.5588	0.5417	0.6000
125	0.1022	0.9412	0.9296	0.9677		0.9285	0.4848	0.5652	0.3000		0.6311	0.5882	0.6250	0.5000
130	0.2387	0.8824	0.8873	0.8710		0.8622	0.5152	0.5217	0.5000		0.6226	0.6176	0.6667	0.5000
135	0.1203	0.9216	0.8873	1.0000		0.8487	0.6061	0.5652	0.7000		0.5971	0.5882	0.6250	0.5000
140	0.1687	0.8922	0.9014	0.8710		1.0896	0.5152	0.3478	0.9000		0.7180	0.5000	0.3750	0.8000
145	0.0824	0.9314	0.9014	1.0000		0.8066	0.6667	0.6522	0.7000		0.4136	0.7059	0.6667	0.8000
150	0.0980	0.9608	0.9718	0.9355		0.8670	0.6061	0.5652	0.7000		0.5634	0.6471	0.6250	0.7000
155	0.1323	0.9118	0.8873	0.9677		0.9813	0.6364	0.5217	0.9000		0.7525	0.6176	0.5417	0.8000
160	0.0783	0.9510	0.9296	1.0000		0.7906	0.6364	0.6087	0.7000		0.5428	0.6471	0.6667	0.6000
165	0.0719	0.9608	0.9718	0.9355		1.0619	0.5455	0.4783	0.7000		0.7749	0.6176	0.5417	0.8000
170	0.0975	0.9608	0.9718	0.9355		0.7924	0.5758	0.6087	0.5000		0.5704	0.6176	0.6250	0.6000
175	0.1887	0.8824	0.8732	0.9032		1.0333	0.6061	0.5217	0.8000		0.7423	0.6176	0.5833	0.7000
180	0.1474	0.9412	0.9718	0.8710		0.8955	0.6061	0.6087	0.6000		0.5708	0.6176	0.6250	0.6000
185	0.0596	0.9510	0.9296	1.0000		0.9547	0.6364	0.5652	0.8000		0.6500	0.5882	0.5833	0.6000
190	0.1078	0.9510	0.9859	0.8710		0.8790	0.5758	0.6087	0.5000		0.5211	0.6471	0.7083	0.5000
195	0.0727	0.9804	1.0000	0.9355		1.0931	0.5758	0.4348	0.9000		0.7393	0.6176	0.5417	0.8000
200	0.1102	0.9314	0.9155	0.9677		0.9273	0.6061	0.6522	0.5000		0.5663	0.6176	0.6250	0.6000
205	0.0660	0.9608	0.9577	0.9677		0.9856	0.5455	0.4348	0.8000		0.6307	0.6176	0.5833	0.7000
210	0.0650	0.9608	0.9437	1.0000		0.9842	0.6061	0.6087	0.6000		0.6064	0.5882	0.5833	0.6000
215	0.1524	0.9412	0.9296	0.9677		0.9396	0.6061	0.6522	0.5000		0.5205	0.6765	0.7083	0.6000
220	0.1421	0.9706	0.9859	0.9355		0.9347	0.6667	0.6522	0.7000		0.5515	0.6765	0.7083	0.6000
225	0.0484	0.9804	0.9859	0.9677		0.9706	0.6667	0.6087	0.8000		0.6336	0.6176	0.6250	0.6000
230	0.1062	0.9118	0.9014	0.9355		0.9904	0.5152	0.4348	0.7000		0.6424	0.5882	0.5833	0.6000
235	0.0770	0.9706	0.9577	1.0000		0.9331	0.5758	0.5652	0.6000		0.6322	0.5882	0.5833	0.6000
240	0.0574	0.9706	0.9718	0.9677		0.9207	0.6364	0.6087	0.7000		0.6052	0.6176	0.6667	0.5000
245	0.0689	0.9608	0.9437	1.0000		0.9245	0.6667	0.6087	0.8000		0.6164	0.6176	0.6667	0.5000
250	0.1379	0.9804	1.0000	0.9355		0.9843	0.5455	0.4783	0.7000		0.5966	0.6176	0.6250	0.6000
255	0.1241	0.9118	0.9155	0.9032		1.0007	0.6061	0.5652	0.7000		0.6680	0.5882	0.6250	0.5000
260	0.0845	0.9314	0.9155	0.9677		1.0090	0.6364	0.5652	0.8000		0.6935	0.5882	0.5833	0.6000
265	0.0965	0.9608	0.9718	0.9355		0.9462	0.6364	0.6522	0.6000		0.5756	0.6176	0.6250	0.6000
270	0.0588	0.9804	0.9718	1.0000		0.9509	0.6667	0.5652	0.9000		0.6636	0.5882	0.5833	0.6000
275	0.2001	0.9216	0.9296	0.9032		1.0021	0.6061	0.4783	0.9000		0.6757	0.5588	0.5833	0.5000
280	0.1721	0.9412	0.9577	0.9032		0.9802	0.5758	0.6087	0.5000		0.6290	0.5882	0.6250	0.5000
285	0.0584	0.9804	1.0000	0.9355		0.9924	0.5758	0.5217	0.7000		0.6670	0.5882	0.5833	0.6000
290	0.0577	0.9706	0.9718	0.9677		1.1550	0.5455	0.3913	0.9000		0.7628	0.5588	0.5833	0.5000
295	0.1511	0.9804	0.9859	0.9677		0.9762	0.5758	0.5652	0.6000		0.6437	0.5588	0.5833	0.5000
300	0.1002	0.9706	0.9718	0.9677		1.0105	0.6364	0.5217	0.9000		0.6598	0.5588	0.5833	0.5000
305	0.0835	0.9216	0.9437	0.8710		0.9254	0.6061	0.6087	0.6000		0.6117	0.5882	0.5833	0.6000
310	0.2505	0.9118	0.9437	0.8387		0.9470	0.6061	0.6087	0.6000		0.5873	0.5882	0.6250	0.5000
315	0.0469	0.9902	0.9859	1.0000		0.9971	0.6667	0.5652	0.9000		0.6666	0.5882	0.6250	0.5000
320	0.0392	0.9902	0.9859	1.0000		1.0614	0.6364	0.5652	0.8000		0.7097	0.5882	0.5833	0.6000
325	0.1599	0.9314	0.9577	0.8710		0.9580	0.6364	0.6087	0.7000		0.6383	0.6176	0.6667	0.5000
330	0.0514	0.9706	0.9718	0.9677		0.8650	0.6364	0.6957	0.5000		0.5409	0.6471	0.7083	0.5000
335	0.1514	0.9510	0.9577	0.9355		0.9138	0.5758	0.6087	0.5000		0.5882	0.5882	0.6250	0.5000
340	0.0670	0.9706	0.9718	0.9677		0.9867	0.6364	0.5652	0.8000		0.6463	0.5588	0.5833	0.5000
345	0.0502	0.9608	0.9577	0.9677		1.0048	0.6364	0.5652	0.8000		0.6811	0.5588	0.5833	0.5000
350	0.1099	0.9608	0.9718	0.9355		0.8742	0.6061	0.6087	0.6000		0.5660	0.5882	0.6250	0.5000
355	0.2225	0.9216	0.9437	0.8710		0.9697	0.6667	0.6087	0.8000		0.6487	0.5882	0.6250	0.5000
360	0.0667	0.9804	0.9859	0.9677		1.0056	0.6061	0.4783	0.9000		0.6999	0.5588	0.5833	0.5000
365	0.0460	0.9804	0.9718	1.0000		0.8936	0.5758	0.5652	0.6000		0.6120	0.5882	0.5833	0.6000
370	0.1347	0.9706	0.9859	0.9355		0.9551	0.5758	0.6087	0.5000		0.6164	0.6176	0.6667	0.5000
375	0.0700	0.9510	0.9577	0.9355		0.9496	0.6061	0.5217	0.8000		0.6472	0.5588	0.5833	0.5000
380	0.0683	0.9804	0.9859	0.9677		1.0175	0.6364	0.5652	0.8000		0.6748	0.5588	0.5833	0.5000
385	0.1133	0.9314	0.9296	0.9355		1.2106	0.5455	0.3913	0.9000		0.7790	0.5882	0.5417	0.7000
390	0.1257	0.9118	0.9155	0.9032		0.9662	0.6364	0.5217	0.9000		0.6507	0.5588	0.5833	0.5000
395	0.1476	0.9804	1.0000	0.9355		0.9970	0.5758	0.6087	0.5000		0.6044	0.5588	0.5833	0.5000
400	0.0608	0.9804	0.9718	1.0000		1.0668	0.6061	0.4783	0.9000		0.7685	0.5588	0.5833	0.5000
405	0.1546	0.9118	0.9014	0.9355		0.9150	0.6667	0.6087	0.8000		0.6425	0.5588	0.5833	0.5000
410	0.0589	0.9608	0.9859	0.9032		0.8979	0.6061	0.6087	0.6000		0.6168	0.5588	0.5833	0.5000
415	0.1113	0.9314	0.9296	0.9355		0.9495	0.6364	0.6087	0.7000		0.6471	0.5588	0.5833	0.5000
420	0.0823	0.9608	0.9437	1.0000		0.9971	0.5455	0.4348	0.8000		0.6388	0.5588	0.5833	0.5000
