=============training from sratch============
Program ID: 7241

Program command: 
 ['TrainSegV3d_ROI.py', '/home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI', '1', '/home/hxie1/data/OvarianCancerCT/primaryROI/nrrd_npy', '/home/hxie1/data/OvarianCancerCT/primaryROI/labels_npy', '0', '3,2,1']

Major program changes: 
      1  3D V model for primary cancer ROI;
      2  Uniform ROI size: 51*171*171 in z,y,x directon;
      3  Total 36 patient data, in which training data 24 patients, validation 6 patients, and test 6 patients;
      4  all 36 patients data have 50-80% 3D label;
      5  Dice coefficient is 3D dice coefficient against corresponding 3D ground truth;
      6  training data augmentation in the fly: affine in XY plane, translation in Z direction;
      7  In the bottle neck of V model, the latent vector has size of 512*2*9*9;
      Sep 16th, 2019:
      1   add dynamic loss weight according trainin  data;
      2   refine learning rate decay.
      Sep 21st, 2019
      1   add improved Boundary Loss2, and inherit the previous learningrate of network of pure CELoss;
      Sep 23rd, 2019:
      1   improve mean of boundary loss limited on the A,B regions;
      2   use log(segProb) instead of segProb in the boudary loss;
      3   CrossEntropy weight reduces 0.01 per 5 epochs from 1 to 0.01, while boundary Loss weight increase 0.01 per 5 epochs from 0.01 to 1. 
      Sep 24th, 2019
      1   Use boundaryLoss1, which is considering the whole volume. 
      Sep 25th, 2019
      1   use boundaryLoss3, which is a stronger gradient signal to improve loss.
      2   unbalanced weight for class is applied on logP,and just use boundaryLoss3 with CELoss.
      3   use CELoss and boundaryLoss together.
      4   Use truncated DistanceCrossEntropy Loss alone;
      5   change LRScheduler into reduce into Plateau with initial LR=0.1
      Sep 26th, 2019
      1   Add one layer in the bottom of V model;
      2   Add residual connnection in each layer;
      
      
         

Discarded changes:                  

Experiment setting:
Input CT data: 51*171*171 ROI around primary cancer

Loss Function:  SoftMax

Data:   total 36 patients with 50-80% label, 6-fold cross validation, test 6, validation 6, and training 24.  
    script: python3.7 statisticsLabelFiles.py 
    Total 36 in /home/hxie1/data/OvarianCancerCT/primaryROI/labels_npy
    0 has 48159408 elements, with a rate of  0.8970491562903105 
    1 has 5527068 elements, with a rate of  0.10295084370968957

Training strategy: 

          

Program starting Time: 2019-09-26 13:40:59.019104
Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20190926_134059

Info: this is the 0th fold leave for test in the 6-fold cross-validation.

Info: batchSize = 6

Net parameters is saved in  /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20190926_134059.
6-fold cross validation: the 0th fold is for test, the 1th fold is for validation, remaining folds are for training.

training dataset: total 24 image files.

validation dataset: total 6 image files.

test dataset: total 6 image files.
Total 24 training files  extracted from /home/hxie1/data/OvarianCancerCT/primaryROI/labels_npy
0 has 32252453 elements, with a rate of  0.9011334530506342 
1 has 3538531 elements, with a rate of  0.0988665469493658 
loss weight = tensor([1.0000, 9.1146])
Network has total 73,047,746 parameters.


************** Table of Training Log **************
Epoch	LearningRate		TrainingLoss	Dice		ValidationLoss	Dice		TestLoss	Dice
0	1.0000e-02		31.5132		0.08951		834391.5000		0.00000		748727.0000		0.00000
5	1.0000e-02		7.1363		0.48360		9.1992		0.46951		10.5436		0.37486
10	1.0000e-02		6.2922		0.50855		5.9500		0.56618		6.9630		0.45830
15	1.0000e-02		5.4392		0.53036		6.7490		0.65483		4.9173		0.56339
20	1.0000e-02		5.9402		0.51131		5.5272		0.62037		5.1994		0.50538
25	1.0000e-02		4.1884		0.53608		10.7659		0.61628		4.6438		0.64052
30	1.0000e-02		4.3554		0.55159		5.9473		0.62830		5.5647		0.48782
35	1.0000e-02		4.2012		0.57734		5.1198		0.72072		7.0950		0.55217
40	1.0000e-02		5.1218		0.55888		5.6855		0.67126		4.5662		0.57933
45	1.0000e-02		4.6222		0.52411		8.0705		0.64833		4.1233		0.61844
50	1.0000e-02		4.9641		0.56514		5.8638		0.66199		4.6774		0.56728
55	1.0000e-02		5.2970		0.58125		7.0908		0.65338		4.0290		0.59546
60	1.0000e-02		4.3572		0.54360		4.7727		0.68429		4.9794		0.55654
65	1.0000e-02		4.0045		0.57827		5.5165		0.68316		6.6272		0.54997
70	1.0000e-02		4.3323		0.55485		6.0427		0.65081		4.6254		0.57856
75	1.0000e-02		4.9595		0.54567		6.1714		0.62934		4.9592		0.52137
80	1.0000e-02		4.0761		0.61729		5.5064		0.68393		3.7165		0.61897
85	1.0000e-02		4.4952		0.57176		6.7132		0.66411		3.5658		0.64984
90	1.0000e-02		4.1007		0.60221		6.2673		0.69219		5.9875		0.60594
95	1.0000e-02		4.7697		0.58766		5.8788		0.62714		5.2629		0.51124
100	1.0000e-02		3.3302		0.60710		10.1628		0.62572		4.1468		0.63011
105	1.0000e-02		3.6622		0.63770		4.8034		0.66082		4.3937		0.57566
110	1.0000e-02		3.3211		0.64160		4.2390		0.70961		6.4904		0.56868
115	1.0000e-02		3.6707		0.60024		12.0934		0.56055		4.1619		0.62666
120	1.0000e-02		2.8991		0.62334		4.6463		0.68940		3.9797		0.60316
125	1.0000e-02		4.1145		0.64460		5.9943		0.65765		4.1994		0.57334
130	1.0000e-02		3.4144		0.62878		5.4939		0.66881		3.8700		0.61748
135	1.0000e-02		4.1313		0.62170		12.1232		0.54029		5.8572		0.51793
140	1.0000e-02		4.3929		0.58174		5.5251		0.63682		4.2176		0.57217
145	1.0000e-02		3.4904		0.66214		5.4004		0.66811		3.1085		0.69300
150	1.0000e-02		3.4962		0.64478		4.9253		0.70315		3.7806		0.65132
155	1.0000e-02		3.1004		0.64461		6.1492		0.69306		3.3807		0.66087
160	1.0000e-02		3.0654		0.67124		4.9707		0.68392		4.1476		0.59393
165	1.0000e-03		4.0857		0.60412		5.3849		0.62762		4.8756		0.56973
170	1.0000e-03		3.3475		0.60793		4.4370		0.67752		3.9132		0.58868
175	1.0000e-03		2.5888		0.67119		4.3281		0.70693		3.3180		0.64220
180	1.0000e-03		2.5228		0.65690		4.4145		0.70867		3.2722		0.64140
185	1.0000e-03		2.5553		0.65663		4.2422		0.70516		3.4866		0.61724
190	1.0000e-03		2.7933		0.68007		4.4824		0.70369		3.5038		0.62814
195	1.0000e-03		2.5336		0.68705		4.3897		0.71449		3.4387		0.63313
200	1.0000e-03		2.7042		0.66022		4.6282		0.69763		3.3917		0.63817
205	1.0000e-03		2.5367		0.68284		4.5154		0.69782		3.5394		0.62586
210	1.0000e-03		3.1504		0.66894		4.3678		0.69867		3.6610		0.62366
215	1.0000e-03		2.9547		0.68370		4.7431		0.69685		3.6245		0.63782
220	1.0000e-04		2.3623		0.67054		5.0020		0.67744		3.5748		0.62481
225	1.0000e-04		2.4825		0.69026		4.8386		0.69018		3.6054		0.62695
230	1.0000e-04		2.9905		0.68541		4.7611		0.68625		3.6327		0.62365
235	1.0000e-04		2.5754		0.67754		4.6694		0.69047		3.6801		0.61442
240	1.0000e-04		3.0722		0.69625		4.8844		0.69386		3.5241		0.64002
245	1.0000e-04		2.5888		0.68755		4.7844		0.68594		3.7983		0.60972
250	1.0000e-04		2.6593		0.69499		4.6310		0.68152		3.7558		0.61754
255	1.0000e-04		2.2516		0.69275		4.7153		0.69127		3.7737		0.61843
260	1.0000e-04		2.8114		0.67848		4.9629		0.67673		3.8759		0.61387
265	1.0000e-04		2.3206		0.66849		4.7182		0.69921		3.7025		0.62044
270	1.0000e-04		2.5445		0.69055		4.7749		0.69292		3.6793		0.63539
275	1.0000e-05		2.3857		0.69381		4.7666		0.69122		3.6946		0.61967
280	1.0000e-05		2.7125		0.69798		4.9937		0.67603		3.9338		0.60569
285	1.0000e-05		2.8292		0.67697		4.9565		0.68358		3.8463		0.62315
290	1.0000e-05		2.1637		0.70199		5.0362		0.68622		3.9768		0.61979
295	1.0000e-05		2.6400		0.70450		4.9535		0.67377		3.9378		0.60382
300	1.0000e-05		2.6013		0.68590		4.9811		0.67192		3.9524		0.61406
305	1.0000e-05		2.8756		0.69406		5.0583		0.68420		3.8665		0.63164
310	1.0000e-05		2.6387		0.71134		4.7285		0.68886		3.8017		0.62273
315	1.0000e-05		2.5302		0.68909		5.1955		0.69288		3.8952		0.63988
320	1.0000e-05		2.5221		0.69994		4.9455		0.68096		3.8248		0.62762
325	1.0000e-05		2.8730		0.68125		4.8806		0.68798		3.6891		0.63829
330	1.0000e-06		2.2349		0.68646		4.8680		0.69132		3.7510		0.63166
335	1.0000e-06		2.4340		0.68640		4.8479		0.68233		3.7815		0.61386
340	1.0000e-06		2.5535		0.68857		5.0477		0.68106		3.9384		0.62501
345	1.0000e-06		2.6117		0.69095		4.9152		0.69437		3.6920		0.62953
350	1.0000e-06		2.1370		0.69486		4.8322		0.68227		3.8023		0.61450
355	1.0000e-06		2.9052		0.69424		4.8947		0.68277		3.7885		0.61736
360	1.0000e-06		3.0939		0.69798		4.8646		0.69323		3.7103		0.62807
365	1.0000e-06		2.7546		0.67810		4.7774		0.68205		3.8246		0.61181
370	1.0000e-06		2.5564		0.68648		4.7615		0.68233		3.8407		0.60879
375	1.0000e-06		2.2821		0.69248		4.9560		0.68032		3.8668		0.61664
380	1.0000e-06		2.5355		0.71248		4.9700		0.68631		3.7961		0.62896
385	1.0000e-07		2.3424		0.72086		4.6567		0.68925		3.7597		0.61848
390	1.0000e-07		2.7837		0.69670		4.9114		0.68358		3.7964		0.61971
395	1.0000e-07		2.3381		0.66789		4.9928		0.68982		3.9504		0.61129
400	1.0000e-07		2.5540		0.69519		4.6451		0.69678		3.7543		0.61426
405	1.0000e-07		2.0471		0.70236		5.1429		0.68968		3.7640		0.63390
410	1.0000e-07		2.4830		0.67649		4.8276		0.68543		3.7731		0.62114
415	1.0000e-07		2.3520		0.68320		4.8610		0.68728		3.6883		0.62639
420	1.0000e-07		2.6175		0.68551		4.7989		0.68497		3.7567		0.61981
425	1.0000e-07		2.3429		0.69296		4.9321		0.68894		4.0139		0.61278
430	1.0000e-07		2.8760		0.67717		4.7901		0.68775		3.8845		0.61307
435	1.0000e-07		2.1596		0.71109		4.9749		0.69126		3.6799		0.62990
440	1.0000e-08		2.2176		0.70156		4.9081		0.68486		3.8710		0.61594
445	1.0000e-08		3.4997		0.68224		4.8986		0.68558		3.8764		0.62138
450	1.0000e-08		2.5301		0.69275		4.9409		0.68235		3.8892		0.60876
455	1.0000e-08		2.6868		0.68648		4.9539		0.67705		3.9963		0.60340
460	1.0000e-08		2.4286		0.69599		4.8872		0.69185		3.8942		0.61548
465	1.0000e-08		3.0916		0.68270		4.9007		0.67842		4.0149		0.61742
470	1.0000e-08		2.5977		0.69858		4.8725		0.67454		3.9060		0.61125
475	1.0000e-08		2.3099		0.67348		4.8097		0.68208		3.8824		0.61759
480	1.0000e-08		2.4561		0.68920		4.8362		0.68668		3.9478		0.61396
485	1.0000e-08		2.1584		0.70331		4.8325		0.69123		3.7120		0.62398
490	1.0000e-08		2.7185		0.68408		5.0175		0.68476		3.8302		0.62288
495	1.0000e-08		2.9602		0.67023		4.8115		0.68079		3.9118		0.61267
500	1.0000e-08		2.2856		0.68135		4.8857		0.68093		3.8441		0.60873
505	1.0000e-08		2.1726		0.67144		5.0955		0.68192		3.8157		0.61794
510	1.0000e-08		2.3838		0.70266		4.9222		0.67897		3.8709		0.61229
515	1.0000e-08		2.2176		0.68908		5.0535		0.68485		3.7974		0.62159
520	1.0000e-08		2.7219		0.68367		4.9975		0.68133		3.7801		0.62293
525	1.0000e-08		2.2247		0.70080		4.8297		0.68269		3.7841		0.61693
530	1.0000e-08		2.9082		0.68272		5.3201		0.67610		3.9955		0.62269
535	1.0000e-08		2.2269		0.70223		4.7839		0.68861		3.7040		0.61674
540	1.0000e-08		2.5352		0.69799		4.9001		0.68320		3.8315		0.61885
545	1.0000e-08		2.8162		0.69355		4.9542		0.67982		3.9060		0.61966
550	1.0000e-08		2.4821		0.68617		4.8953		0.68696		3.7889		0.62521
555	1.0000e-08		2.3638		0.70083		4.9047		0.68721		3.8005		0.62106
560	1.0000e-08		2.2574		0.70847		4.9510		0.68320		3.8406		0.61739
565	1.0000e-08		3.0987		0.67463		5.0827		0.68407		4.0186		0.62537
570	1.0000e-08		2.1808		0.68532		4.7958		0.68888		3.7334		0.62389
575	1.0000e-08		2.5291		0.69277		4.7072		0.69211		3.6961		0.62603
580	1.0000e-08		2.6311		0.70797		4.8162		0.68741		3.7970		0.61800
585	1.0000e-08		2.6919		0.67575		4.7907		0.68851		3.7500		0.61942
590	1.0000e-08		2.2592		0.69891		4.7654		0.67990		3.8881		0.60338
595	1.0000e-08		2.1538		0.69430		4.9563		0.67402		3.9451		0.61315
600	1.0000e-08		2.5443		0.68398		5.0405		0.67807		3.9313		0.60634
605	1.0000e-08		2.4321		0.67043		4.6927		0.69030		3.7902		0.61126
610	1.0000e-08		2.4282		0.67413		4.8607		0.68306		3.8479		0.61409
615	1.0000e-08		2.5755		0.69360		4.7096		0.68291		3.7171		0.61609
620	1.0000e-08		2.6756		0.68537		4.8041		0.69175		3.7058		0.63119
625	1.0000e-08		2.4719		0.68771		4.7975		0.68845		3.7071		0.62026
630	1.0000e-08		2.6050		0.68536		4.9286		0.67538		3.8227		0.61365
635	1.0000e-08		2.6439		0.67691		4.6739		0.68956		3.6987		0.61842
640	1.0000e-08		2.7406		0.69099		4.9360		0.69312		3.8224		0.62803
645	1.0000e-08		2.6581		0.70878		4.8384		0.68259		3.8809		0.61116
650	1.0000e-08		2.5175		0.70451		4.9348		0.68753		3.7546		0.62768
655	1.0000e-08		2.5662		0.67892		4.9073		0.68993		3.8327		0.62543
660	1.0000e-08		2.4196		0.67987		4.9681		0.68704		3.8057		0.62402
665	1.0000e-08		2.5615		0.70143		4.7535		0.68756		3.6711		0.62764
