Program ID of SkyWatcher Network training:23737

Program command: 
 ['TrainSkyWatcherPurePrediction.py', '/home/hxie1/temp_netParameters/OvarianCancer/SkyWatcher/PurePrediction', '/home/hxie1/data/OvarianCancerCT/Extract_ps2_2_5/images_npy', '/home/hxie1/data/OvarianCancerCT/patientResponseDict.json']

Major program changes: 
                      merge train and test imageDataMgr into one.
                      when epoch %5 ==0, do not use mixup.
                      Directly use 3D data for treatment prediction without segmentation. 
                      Number of filters in the first layer in encoder is 32.
                      Only epoch %5 ==0, print log
                      Do not use normalization in FC layers.
                      Use cropping VOI on the fly.
                       

Experiment setting for Image3d ROI to response:
Input CT data: 29*140*140  3D CT raw image ROI with spacing size(5*2*2)

Predictive Model: 1,  first 3-layer dense conv block with channel size 128.
                  2,  and 3 dense conv DownBB blocks,  each of which includes a stride 2 conv and 3-layers dense conv block; 
                  3,  and 3 fully connected layers  changes the tensor into size 2*1;
                  4,  final a softmax for binary classification;
                  Total network learning parameters are 8 million.
                  Network architecture is referred at https://github.com/Hui-Xie/OvarianCancer/blob/master/SkyWatcherModel.py

response Loss Function:   focus loss  with weight [3.3, 1.4] for [0,1] class separately, as [0,1] uneven distribution.

Data:   training data has 113 patients, and valdiation data has 27 patients with training/test rate 80/20.
        We randomize all data, and then assign same distrubtion of treat reponse 0,1 into to training and test data set.


Training strategy:  50% probability of data are mixed up with beta distribution with alpha =0.4, to feed into network for training. 
                    No other data augmentation, and no dropout.  

                    Learning Scheduler:  Reduce learning rate on  plateau, and learning rate patience is 30 epochs.                                

            

Program starting Time: 2019-06-24 14:09:46.965626
Info: this is the 0th fold leave for test in the 10-fold cross-validation.

Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/SkyWatcher/PurePrediction

Now program get 169 input files.
Infor: In all data of 169 files, respone 0 has 51 files,
	  and response 1 has 118 files, where positive response rate = 0.6982248520710059 in full data
Infor: Validation Set has 16 files,and Training Set has 153 files
Infor: Validataion set has 11 1's, and positive response rate = 0.6875
Infor: trainning set has 107 1's, and positive response rate = 0.6993464052287581
Infor: the drop_last data in the dataMgr may lead the number of validation set and training set less than above number.
Infor: program is in multi samples running model.
TrainTestData Input:  batchSize=9, depth=29, height=140, width=140

Info: the size of bottle neck in the net = (512, 1, 7, 7)

Info: program uses Mixup with alpha=0.4, and mixupProb = 0.5.
Network trains from scratch.
Network has total 21,463,612 parameters.
Infor: Response Cross Entropy Weight: [3.3333333333333335, 1.4285714285714286] for label[0, 1]
Info: program will use 3 GPUs.
Loss Functions List: FocalCELoss with weight of 1; 

Hints: Optimal_Result = Yes = 1,  Optimal_Result = No = 0 

Epoch	TrLoss	Accura	TPR_r	TNR_r		TsLoss	Accura	TPR_r	TNR_r
0	0.3307	0.6993	1.0000	0.0000		0.1878	0.6875	1.0000	0.0000
5	0.1727	0.4967	0.4299	0.6522		0.1631	0.6250	0.4545	1.0000
10	0.1712	0.6732	0.7383	0.5217		0.1752	0.7500	1.0000	0.2000
15	0.1743	0.5425	0.5981	0.4130		0.1707	0.6875	0.9091	0.2000
