Program ID of SkyWatcher Network training:23737

Program command: 
 ['TrainSkyWatcherPurePrediction.py', '/home/hxie1/temp_netParameters/OvarianCancer/SkyWatcher/PurePrediction', '/home/hxie1/data/OvarianCancerCT/Extract_ps2_2_5/images_npy', '/home/hxie1/data/OvarianCancerCT/patientResponseDict.json']

Major program changes: 
                      merge train and test imageDataMgr into one.
                      when epoch %5 ==0, do not use mixup.
                      Directly use 3D data for treatment prediction without segmentation. 
                      Number of filters in the first layer in encoder is 32.
                      Only epoch %5 ==0, print log
                      Do not use normalization in FC layers.
                      Use cropping VOI on the fly.
                       

Experiment setting for Image3d ROI to response:
Input CT data: 29*140*140  3D CT raw image ROI with spacing size(5*2*2)

Predictive Model: 1,  first 3-layer dense conv block with channel size 128.
                  2,  and 3 dense conv DownBB blocks,  each of which includes a stride 2 conv and 3-layers dense conv block; 
                  3,  and 3 fully connected layers  changes the tensor into size 2*1;
                  4,  final a softmax for binary classification;
                  Total network learning parameters are 8 million.
                  Network architecture is referred at https://github.com/Hui-Xie/OvarianCancer/blob/master/SkyWatcherModel.py

response Loss Function:   focus loss  with weight [3.3, 1.4] for [0,1] class separately, as [0,1] uneven distribution.

Data:   training data has 113 patients, and valdiation data has 27 patients with training/test rate 80/20.
        We randomize all data, and then assign same distrubtion of treat reponse 0,1 into to training and test data set.


Training strategy:  50% probability of data are mixed up with beta distribution with alpha =0.4, to feed into network for training. 
                    No other data augmentation, and no dropout.  

                    Learning Scheduler:  Reduce learning rate on  plateau, and learning rate patience is 30 epochs.                                

            

Program starting Time: 2019-06-24 14:09:46.965626
Info: this is the 0th fold leave for test in the 10-fold cross-validation.

Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/SkyWatcher/PurePrediction

Now program get 169 input files.
Infor: In all data of 169 files, respone 0 has 51 files,
	  and response 1 has 118 files, where positive response rate = 0.6982248520710059 in full data
Infor: Validation Set has 16 files,and Training Set has 153 files
Infor: Validataion set has 11 1's, and positive response rate = 0.6875
Infor: trainning set has 107 1's, and positive response rate = 0.6993464052287581
Infor: the drop_last data in the dataMgr may lead the number of validation set and training set less than above number.
Infor: program is in multi samples running model.
TrainTestData Input:  batchSize=9, depth=29, height=140, width=140

Info: the size of bottle neck in the net = (512, 1, 7, 7)

Info: program uses Mixup with alpha=0.4, and mixupProb = 0.5.
Network trains from scratch.
Network has total 21,463,612 parameters.
Infor: Response Cross Entropy Weight: [3.3333333333333335, 1.4285714285714286] for label[0, 1]
Info: program will use 3 GPUs.
Loss Functions List: FocalCELoss with weight of 1; 

Hints: Optimal_Result = Yes = 1,  Optimal_Result = No = 0 

Epoch	TrLoss	Accura	TPR_r	TNR_r		TsLoss	Accura	TPR_r	TNR_r
0	0.3307	0.6993	1.0000	0.0000		0.1878	0.6875	1.0000	0.0000
5	0.1727	0.4967	0.4299	0.6522		0.1631	0.6250	0.4545	1.0000
10	0.1712	0.6732	0.7383	0.5217		0.1752	0.7500	1.0000	0.2000
15	0.1743	0.5425	0.5981	0.4130		0.1707	0.6875	0.9091	0.2000
20	0.1703	0.6209	0.6355	0.5870		0.1825	0.6250	0.8182	0.2000
25	0.1726	0.5686	0.6449	0.3913		0.1702	0.7500	0.8182	0.6000
30	0.1692	0.6013	0.5981	0.6087		0.1849	0.6875	0.9091	0.2000
35	0.1744	0.4314	0.3271	0.6739		0.1681	0.5000	0.2727	1.0000
40	0.1739	0.6732	0.8411	0.2826		0.1740	0.6250	0.8182	0.2000
45	0.1670	0.6667	0.7944	0.3696		0.1743	0.6250	0.9091	0.0000
50	0.1667	0.6144	0.6168	0.6087		0.2193	0.5625	0.8182	0.0000
55	0.1704	0.5359	0.5327	0.5435		0.1835	0.6250	0.9091	0.0000
60	0.1713	0.5098	0.4579	0.6304		0.1761	0.5000	0.5455	0.4000
65	0.1681	0.7124	0.8131	0.4783		0.1997	0.6250	0.9091	0.0000
70	0.1629	0.6993	0.7944	0.4783		0.2012	0.6875	1.0000	0.0000
75	0.1705	0.6078	0.6636	0.4783		0.1958	0.5000	0.7273	0.0000
80	0.1726	0.6340	0.7103	0.4565		0.1852	0.6250	0.9091	0.0000
85	0.1714	0.5621	0.5794	0.5217		0.2003	0.5000	0.7273	0.0000
90	0.1716	0.6209	0.6262	0.6087		0.1917	0.3125	0.3636	0.2000
95	0.1660	0.6405	0.7196	0.4565		0.1935	0.6250	0.8182	0.2000
100	0.1635	0.6471	0.6729	0.5870		0.1941	0.5000	0.7273	0.0000
105	0.1658	0.6078	0.6168	0.5870		0.1831	0.6250	0.8182	0.2000
110	0.1634	0.7124	0.8131	0.4783		0.2036	0.6875	0.9091	0.2000
115	0.1635	0.6667	0.6916	0.6087		0.2152	0.6875	1.0000	0.0000
120	0.1677	0.4837	0.3645	0.7609		0.2073	0.5000	0.5455	0.4000
125	0.1656	0.6209	0.6168	0.6304		0.2004	0.5625	0.8182	0.0000
130	0.1703	0.5817	0.6449	0.4348		0.2076	0.6250	0.8182	0.2000
135	0.1628	0.6601	0.7009	0.5652		0.2255	0.6250	0.9091	0.0000
140	0.1677	0.6013	0.5701	0.6739		0.1989	0.4375	0.6364	0.0000
145	0.1647	0.5294	0.4860	0.6304		0.2193	0.3750	0.3636	0.4000
150	0.1672	0.6340	0.6636	0.5652		0.1992	0.5625	0.8182	0.0000
155	0.1630	0.6013	0.6168	0.5652		0.2192	0.6250	0.8182	0.2000
160	0.1669	0.5556	0.5514	0.5652		0.2088	0.5000	0.5455	0.4000
165	0.1674	0.6078	0.5794	0.6739		0.2077	0.5625	0.8182	0.0000
170	0.1687	0.5882	0.5794	0.6087		0.2089	0.5625	0.8182	0.0000
175	0.1646	0.6340	0.6262	0.6522		0.2102	0.4375	0.6364	0.0000
180	0.1588	0.6340	0.5794	0.7609		0.2003	0.5000	0.7273	0.0000
185	0.1669	0.6209	0.6636	0.5217		0.2052	0.5625	0.8182	0.0000
190	0.1551	0.6863	0.6916	0.6739		0.2110	0.5000	0.6364	0.2000
195	0.1540	0.6993	0.7290	0.6304		0.1950	0.6250	0.8182	0.2000
200	0.1533	0.7059	0.7664	0.5652		0.2157	0.5625	0.8182	0.0000
205	0.1565	0.6797	0.7196	0.5870		0.2305	0.6250	0.9091	0.0000
210	0.1615	0.6275	0.6449	0.5870		0.1995	0.6875	0.9091	0.2000
215	0.1505	0.7059	0.7664	0.5652		0.1914	0.5625	0.7273	0.2000
220	0.1585	0.6340	0.5981	0.7174		0.2154	0.5625	0.8182	0.0000
225	0.1589	0.7320	0.8131	0.5435		0.1831	0.5625	0.8182	0.0000
230	0.1678	0.6601	0.7103	0.5435		0.1887	0.6250	0.8182	0.2000
235	0.1600	0.6471	0.6449	0.6522		0.2224	0.5000	0.7273	0.0000
240	0.1684	0.6144	0.6449	0.5435		0.2147	0.5000	0.7273	0.0000
245	0.1548	0.6405	0.6449	0.6304		0.2265	0.6250	0.8182	0.2000
250	0.1487	0.7255	0.7290	0.7174		0.2228	0.5625	0.8182	0.0000
255	0.1626	0.6667	0.7196	0.5435		0.2005	0.5625	0.8182	0.0000
260	0.1629	0.6928	0.7383	0.5870		0.2170	0.6250	0.8182	0.2000
265	0.1660	0.6209	0.6355	0.5870		0.2212	0.5625	0.8182	0.0000
270	0.1553	0.7190	0.7196	0.7174		0.2203	0.6250	0.9091	0.0000
275	0.1634	0.6144	0.6449	0.5435		0.2137	0.6250	0.9091	0.0000
280	0.1631	0.6078	0.5701	0.6957		0.2171	0.6875	0.9091	0.2000
285	0.1572	0.6536	0.6449	0.6739		0.2176	0.6875	1.0000	0.0000
290	0.1578	0.7059	0.7850	0.5217		0.2042	0.6250	0.9091	0.0000
295	0.1626	0.6863	0.7757	0.4783		0.1900	0.6875	0.9091	0.2000
300	0.1590	0.6471	0.6449	0.6522		0.2160	0.5000	0.7273	0.0000
305	0.1511	0.7320	0.7850	0.6087		0.2291	0.5625	0.8182	0.0000
310	0.1505	0.7059	0.7290	0.6522		0.2441	0.6250	0.8182	0.2000
315	0.1577	0.6993	0.7850	0.5000		0.2059	0.5000	0.7273	0.0000
320	0.1528	0.6928	0.7290	0.6087		0.1937	0.5625	0.8182	0.0000
325	0.1572	0.6667	0.7103	0.5652		0.2073	0.5625	0.8182	0.0000
330	0.1501	0.6993	0.7196	0.6522		0.1997	0.5625	0.8182	0.0000
335	0.1510	0.7124	0.7383	0.6522		0.1948	0.6250	0.8182	0.2000
340	0.1488	0.7255	0.7850	0.5870		0.2038	0.6875	0.9091	0.2000
345	0.1599	0.6144	0.6636	0.5000		0.2043	0.5625	0.7273	0.2000
350	0.1483	0.6732	0.6542	0.7174		0.1993	0.6250	0.8182	0.2000
355	0.1349	0.7647	0.7757	0.7391		0.2215	0.6250	0.9091	0.0000
360	0.1556	0.6928	0.7664	0.5217		0.2009	0.5625	0.8182	0.0000
365	0.1560	0.6797	0.7664	0.4783		0.2248	0.5625	0.8182	0.0000
370	0.1511	0.7255	0.8037	0.5435		0.2079	0.6250	0.8182	0.2000
375	0.1449	0.7516	0.7944	0.6522		0.1860	0.6875	0.9091	0.2000
380	0.1547	0.6405	0.6542	0.6087		0.1984	0.6875	1.0000	0.0000
385	0.1551	0.7255	0.8131	0.5217		0.2193	0.6250	0.9091	0.0000
390	0.1490	0.7255	0.7757	0.6087		0.1949	0.6250	0.9091	0.0000
395	0.1466	0.7582	0.7664	0.7391		0.2145	0.5625	0.8182	0.0000
400	0.1471	0.7712	0.7944	0.7174		0.1660	0.6875	1.0000	0.0000
405	0.1334	0.7843	0.8318	0.6739		0.1824	0.6250	0.9091	0.0000
410	0.1439	0.6928	0.6916	0.6957		0.2098	0.5625	0.8182	0.0000
415	0.1545	0.6863	0.6636	0.7391		0.2160	0.5625	0.8182	0.0000
420	0.1381	0.7516	0.7477	0.7609		0.2205	0.6250	0.9091	0.0000
425	0.1443	0.7320	0.7664	0.6522		0.1918	0.6875	1.0000	0.0000
430	0.1630	0.6601	0.7383	0.4783		0.1770	0.6250	0.8182	0.2000
435	0.1542	0.6993	0.7196	0.6522		0.2122	0.5625	0.8182	0.0000
440	0.1438	0.7320	0.7850	0.6087		0.2038	0.6250	0.9091	0.0000
445	0.1451	0.7255	0.7944	0.5652		0.2020	0.6875	1.0000	0.0000
450	0.1441	0.7582	0.7850	0.6957		0.2072	0.6875	1.0000	0.0000
455	0.1427	0.7778	0.8411	0.6304		0.2124	0.6875	1.0000	0.0000
460	0.1364	0.7647	0.8037	0.6739		0.2278	0.6250	0.9091	0.0000
465	0.1551	0.7124	0.7196	0.6957		0.2408	0.4375	0.6364	0.0000
470	0.1439	0.7712	0.7664	0.7826		0.2197	0.6250	0.9091	0.0000
475	0.1322	0.7451	0.7944	0.6304		0.2260	0.5625	0.8182	0.0000
480	0.1261	0.7582	0.7570	0.7609		0.2098	0.6250	0.9091	0.0000
485	0.1266	0.7778	0.8411	0.6304		0.2597	0.5625	0.8182	0.0000
490	0.1270	0.8039	0.8692	0.6522		0.2305	0.6875	0.9091	0.2000
495	0.1180	0.7647	0.7664	0.7609		0.2429	0.6250	0.8182	0.2000
500	0.1138	0.8170	0.8598	0.7174		0.2460	0.6250	0.9091	0.0000
505	0.1160	0.7843	0.7944	0.7609		0.2671	0.6250	0.9091	0.0000
510	0.1174	0.7778	0.8224	0.6739		0.2299	0.6250	0.9091	0.0000
515	0.1108	0.8562	0.8598	0.8478		0.2307	0.6250	0.9091	0.0000
520	0.1181	0.8235	0.8972	0.6522		0.3134	0.6250	0.9091	0.0000
525	0.1055	0.8431	0.8598	0.8043		0.2802	0.6250	0.9091	0.0000
530	0.0959	0.8758	0.8598	0.9130		0.2235	0.7500	0.9091	0.4000
535	0.0979	0.8105	0.7757	0.8913		0.2829	0.6250	0.9091	0.0000
540	0.0877	0.8562	0.8785	0.8043		0.3361	0.5000	0.7273	0.0000
545	0.0994	0.7778	0.7383	0.8696		0.3177	0.4375	0.6364	0.0000
550	0.1029	0.8301	0.8411	0.8043		0.2392	0.6875	1.0000	0.0000
555	0.0877	0.8889	0.9065	0.8478		0.2594	0.6250	0.9091	0.0000
560	0.0833	0.8562	0.8505	0.8696		0.3151	0.6250	0.9091	0.0000
565	0.0828	0.8824	0.8598	0.9348		0.3147	0.6250	0.9091	0.0000
570	0.0784	0.8627	0.8505	0.8913		0.3239	0.6250	0.9091	0.0000
575	0.0874	0.8562	0.8505	0.8696		0.3078	0.6250	0.9091	0.0000
580	0.0958	0.8497	0.8505	0.8478		0.2889	0.6250	0.8182	0.2000
585	0.0889	0.8562	0.8224	0.9348		0.2969	0.6875	0.9091	0.2000
590	0.0788	0.9085	0.9159	0.8913		0.2983	0.6250	0.9091	0.0000
595	0.0649	0.9085	0.8972	0.9348		0.4006	0.6250	0.9091	0.0000
600	0.0722	0.8889	0.8879	0.8913		0.3392	0.6250	0.9091	0.0000
605	0.0672	0.9281	0.9439	0.8913		0.3107	0.5625	0.8182	0.0000
610	0.0791	0.9085	0.9252	0.8696		0.4025	0.5625	0.8182	0.0000
615	0.0795	0.8889	0.8972	0.8696		0.2018	0.5625	0.7273	0.2000
620	0.0499	0.9412	0.9533	0.9130		0.4298	0.5625	0.8182	0.0000
625	0.0591	0.9346	0.9346	0.9348		0.3481	0.6250	0.9091	0.0000
630	0.0458	0.9477	0.9439	0.9565		0.4158	0.6250	0.9091	0.0000
635	0.0559	0.9281	0.9159	0.9565		0.3851	0.6875	1.0000	0.0000
640	0.0536	0.9542	0.9720	0.9130		0.4362	0.6875	1.0000	0.0000
645	0.0413	0.9542	0.9533	0.9565		0.3034	0.6875	1.0000	0.0000
650	0.0436	0.9542	0.9439	0.9783		0.3388	0.6875	1.0000	0.0000
655	0.0399	0.9412	0.9252	0.9783		0.3167	0.6250	0.9091	0.0000
660	0.0370	0.9804	0.9813	0.9783		0.3323	0.6250	0.9091	0.0000
665	0.0313	0.9804	0.9813	0.9783		0.4570	0.6875	1.0000	0.0000
670	0.0378	0.9739	0.9907	0.9348		0.3515	0.6250	0.9091	0.0000
675	0.0385	0.9477	0.9346	0.9783		0.3093	0.6875	1.0000	0.0000
680	0.0349	0.9477	0.9439	0.9565		0.5098	0.6875	1.0000	0.0000
685	0.0263	0.9869	0.9813	1.0000		0.5544	0.6250	0.9091	0.0000
690	0.0280	0.9804	0.9813	0.9783		0.6608	0.6250	0.9091	0.0000
695	0.0350	0.9477	0.9626	0.9130		0.6357	0.6250	0.9091	0.0000
700	0.0295	0.9804	0.9813	0.9783		0.4738	0.6250	0.9091	0.0000
705	0.0488	0.9477	0.9533	0.9348		0.5089	0.6250	0.9091	0.0000
710	0.0281	0.9804	0.9813	0.9783		0.4957	0.6250	0.9091	0.0000
715	0.0366	0.9477	0.9533	0.9348		0.4655	0.6250	0.9091	0.0000
720	0.0308	0.9608	0.9533	0.9783		0.5613	0.6875	1.0000	0.0000
725	0.0221	0.9935	0.9907	1.0000		0.5338	0.6875	1.0000	0.0000
730	0.0246	0.9804	0.9813	0.9783		0.6614	0.6875	1.0000	0.0000
735	0.0305	0.9673	0.9626	0.9783		0.5569	0.6875	1.0000	0.0000
740	0.0235	0.9869	0.9907	0.9783		0.4376	0.6250	0.9091	0.0000
745	0.0278	0.9739	0.9813	0.9565		0.4066	0.7500	1.0000	0.2000
750	0.0235	0.9739	0.9720	0.9783		0.5285	0.6875	1.0000	0.0000
755	0.0204	0.9869	0.9907	0.9783		0.6672	0.6250	0.9091	0.0000
760	0.0448	0.9477	0.9439	0.9565		0.5016	0.6875	1.0000	0.0000
765	0.0261	0.9804	0.9813	0.9783		0.4858	0.6875	1.0000	0.0000
770	0.0207	0.9935	1.0000	0.9783		0.5001	0.6875	1.0000	0.0000
775	0.0230	0.9869	0.9813	1.0000		0.3849	0.7500	1.0000	0.2000
780	0.0359	0.9804	1.0000	0.9348		0.4234	0.6875	1.0000	0.0000
785	0.0281	0.9739	0.9720	0.9783		0.4501	0.6875	1.0000	0.0000
790	0.0178	0.9869	0.9813	1.0000		0.4565	0.7500	1.0000	0.2000
795	0.0163	0.9869	0.9813	1.0000		0.3979	0.6875	1.0000	0.0000
