=============training from sratch============
Program ID: 29595

Program command: 
 ['TrainSegV3d_ROI.py', '/home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI', '1', '/home/hxie1/data/OvarianCancerCT/primaryROI/nrrd_npy', '/home/hxie1/data/OvarianCancerCT/primaryROI/labels_npy', '2', '3,2,1']

Major program changes: 
      1  3D V model for primary cancer ROI;
      2  Uniform ROI size: 51*171*171 in z,y,x directon;
      3  Total 36 patient data, in which training data 24 patients, validation 6 patients, and test 6 patients;
      4  all 36 patients data have 50-80% 3D label;
      5  Dice coefficient is 3D dice coefficient against corresponding 3D ground truth;
      6  training data augmentation in the fly: affine in XY plane, translation in Z direction;
      7  In the bottle neck of V model, the latent vector has size of 512*2*9*9;
      Sep 16th, 2019:
      1   add dynamic loss weight according trainin  data;
      2   refine learning rate decay.
      Sep 21st, 2019
      1   add improved Boundary Loss2, and inherit the previous learningrate of network of pure CELoss;
      Sep 23rd, 2019:
      1   improve mean of boundary loss limited on the A,B regions;
      2   use log(segProb) instead of segProb in the boudary loss;
      3   CrossEntropy weight reduces 0.01 per 5 epochs from 1 to 0.01, while boundary Loss weight increase 0.01 per 5 epochs from 0.01 to 1. 
      Sep 24th, 2019
      1   Use boundaryLoss1, which is considering the whole volume. 
      Sep 25th, 2019
      1   use boundaryLoss3, which is a stronger gradient signal to improve loss.
      2   unbalanced weight for class is applied on logP,and just use boundaryLoss3 with CELoss.
      3   use CELoss and boundaryLoss together.
      4   Use truncated DistanceCrossEntropy Loss alone;
      5   change LRScheduler into reduce into Plateau with initial LR=0.1
      Sep 26th, 2019
      1   Add one layer in the bottom of V model;
      2   Add residual connnection in each layer;
      
      
         

Discarded changes:                  

Experiment setting:
Input CT data: 51*171*171 ROI around primary cancer

Loss Function:  SoftMax

Data:   total 36 patients with 50-80% label, 6-fold cross validation, test 6, validation 6, and training 24.  
    script: python3.7 statisticsLabelFiles.py 
    Total 36 in /home/hxie1/data/OvarianCancerCT/primaryROI/labels_npy
    0 has 48159408 elements, with a rate of  0.8970491562903105 
    1 has 5527068 elements, with a rate of  0.10295084370968957

Training strategy: 

          

Program starting Time: 2019-09-27 13:17:27.031751
Info: netPath = /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20190927_131727

Info: this is the 2th fold leave for test in the 6-fold cross-validation.

Info: batchSize = 6

Net parameters is saved in  /home/hxie1/temp_netParameters/OvarianCancer/SegV3d_ROI/20190927_131727.
6-fold cross validation: the 2th fold is for test, the 3th fold is for validation, remaining folds are for training.

training dataset: total 24 image files.

validation dataset: total 6 image files.

test dataset: total 6 image files.
Total 24 training files  extracted from /home/hxie1/data/OvarianCancerCT/primaryROI/labels_npy
0 has 31798317 elements, with a rate of  0.8884448943901626 
1 has 3992667 elements, with a rate of  0.11155510560983738 
loss weight = tensor([1.0000, 7.9642])
Network has total 73,047,746 parameters.


************** Table of Training Log **************
Epoch	LearningRate		TrainingLoss	Dice		ValidationLoss	Dice		TestLoss	Dice
0	1.0000e-02		32.7188		0.05016		25911.1719		0.00000		22192.3789		0.00000
5	1.0000e-02		12.2383		0.49061		65.2080		0.39553		10.7549		0.28685
10	1.0000e-02		5.8576		0.55077		8.7727		0.42278		13.8564		0.28891
15	1.0000e-02		5.1564		0.56915		9.5196		0.42883		8.7454		0.32821
20	1.0000e-02		6.4635		0.53430		9.6078		0.56203		6.0203		0.41813
25	1.0000e-02		5.4869		0.52507		6.7000		0.52263		6.0809		0.40829
30	1.0000e-02		5.0552		0.54436		5.2316		0.61457		3.5745		0.54389
35	1.0000e-02		4.7520		0.60145		8.2102		0.55312		4.9667		0.43667
40	1.0000e-02		4.7215		0.57610		5.9257		0.50895		6.7681		0.37957
45	1.0000e-02		4.9562		0.56145		8.7813		0.42120		9.6202		0.31752
50	1.0000e-02		5.0808		0.60419		16.3810		0.55131		4.7750		0.46648
55	1.0000e-02		4.0209		0.61356		7.7939		0.54542		5.1435		0.43020
60	1.0000e-02		4.2968		0.56926		7.9829		0.65991		3.6790		0.53925
65	1.0000e-02		4.3843		0.62906		8.1938		0.54403		4.7644		0.43864
70	1.0000e-02		3.9831		0.59368		7.3546		0.63730		5.2137		0.52930
75	1.0000e-02		4.1746		0.57503		7.5065		0.62948		3.1980		0.55731
80	1.0000e-02		3.7146		0.61878		13.6221		0.62881		3.4436		0.59027
85	1.0000e-03		3.8085		0.61906		5.5716		0.54285		5.3043		0.42547
90	1.0000e-03		3.7461		0.63879		5.6418		0.61910		4.2428		0.48714
95	1.0000e-03		2.9996		0.62977		5.4888		0.62256		3.7967		0.52232
100	1.0000e-03		4.0874		0.63865		6.0971		0.61876		3.5611		0.55266
105	1.0000e-03		2.8394		0.66558		6.1089		0.62358		3.4033		0.58777
110	1.0000e-03		3.6556		0.63718		6.3641		0.64621		3.2806		0.59501
115	1.0000e-03		3.4461		0.66072		7.8446		0.63243		3.5207		0.57579
120	1.0000e-03		3.0640		0.64057		5.9721		0.63607		3.2812		0.56565
125	1.0000e-03		3.7929		0.65839		6.5622		0.64057		3.4348		0.59573
130	1.0000e-03		3.5177		0.64791		5.9096		0.60051		3.8393		0.52707
135	1.0000e-03		4.2409		0.66365		6.6587		0.62778		3.2988		0.55195
140	1.0000e-04		3.2443		0.64571		6.3622		0.60623		4.0052		0.54272
145	1.0000e-04		3.1043		0.67636		6.2206		0.61839		3.8584		0.55602
150	1.0000e-04		3.0035		0.65415		5.9072		0.62246		3.6712		0.55858
155	1.0000e-04		3.4779		0.68629		6.1194		0.61783		3.4813		0.56206
160	1.0000e-04		3.4338		0.68072		6.8948		0.62970		3.2484		0.58935
165	1.0000e-04		2.8949		0.67033		5.6791		0.60903		3.7564		0.53978
170	1.0000e-04		3.5187		0.67889		6.9252		0.62596		3.4265		0.57097
175	1.0000e-04		3.0569		0.65649		6.9714		0.61322		3.6632		0.54852
180	1.0000e-04		3.0971		0.66177		8.4572		0.63528		3.4422		0.58398
185	1.0000e-04		3.0841		0.66596		7.4742		0.62867		3.3252		0.58266
190	1.0000e-04		2.7859		0.66238		7.5214		0.62630		3.4670		0.57325
195	1.0000e-05		2.7387		0.67526		7.8204		0.63437		3.3845		0.58528
200	1.0000e-05		2.8113		0.69116		7.0671		0.61733		3.4444		0.56503
205	1.0000e-05		2.9245		0.67280		7.2706		0.61027		3.7475		0.54343
210	1.0000e-05		2.8859		0.66886		7.8355		0.62670		3.3485		0.57890
215	1.0000e-05		3.5363		0.66429		6.4759		0.60672		3.7960		0.54512
220	1.0000e-05		3.6658		0.67912		7.0058		0.61687		3.4016		0.57035
225	1.0000e-05		2.9402		0.67396		6.7001		0.63335		3.3139		0.59533
230	1.0000e-05		2.9820		0.67339		6.8712		0.61735		3.5084		0.56478
235	1.0000e-05		2.9530		0.69063		7.6746		0.62302		3.5492		0.56801
240	1.0000e-05		3.2380		0.64983		7.4888		0.62604		3.6394		0.56477
245	1.0000e-05		2.7933		0.68682		7.1503		0.63283		3.3890		0.58910
250	1.0000e-06		3.1014		0.68024		6.4216		0.61962		3.4067		0.57202
255	1.0000e-06		2.8612		0.68315		6.9020		0.62204		3.3240		0.58241
260	1.0000e-06		2.8365		0.67595		6.8110		0.61975		3.5557		0.56751
265	1.0000e-06		3.3182		0.68664		6.3595		0.63148		3.4079		0.58510
270	1.0000e-06		2.7153		0.66943		6.6101		0.62205		3.6676		0.56302
275	1.0000e-06		2.6870		0.67974		6.4626		0.62979		3.4830		0.57664
280	1.0000e-06		3.3637		0.66711		6.7391		0.62092		3.3631		0.57547
285	1.0000e-06		3.3038		0.68699		6.9718		0.62817		3.3577		0.59039
290	1.0000e-06		2.9401		0.70242		6.7985		0.62830		3.4086		0.58107
295	1.0000e-06		3.3244		0.66564		6.8975		0.61811		3.4903		0.56867
300	1.0000e-06		2.9804		0.65349		7.3841		0.60869		3.5434		0.55258
305	1.0000e-07		3.0615		0.65784		6.7428		0.60587		3.8937		0.53907
310	1.0000e-07		3.1726		0.67090		7.4470		0.62707		3.4266		0.57858
315	1.0000e-07		3.1497		0.67870		7.2882		0.63485		3.4500		0.58638
320	1.0000e-07		2.9444		0.67562		7.6754		0.60825		3.7736		0.54535
325	1.0000e-07		3.3044		0.64539		6.3973		0.61045		3.7242		0.55774
330	1.0000e-07		2.7986		0.67157		6.3641		0.61380		3.6898		0.55436
335	1.0000e-07		3.8304		0.65545		6.3229		0.62167		3.4873		0.57810
340	1.0000e-07		2.8295		0.67583		6.2291		0.62604		3.3902		0.57761
345	1.0000e-07		3.1195		0.66190		6.3775		0.62304		3.5945		0.56600
350	1.0000e-07		3.0762		0.66529		7.3596		0.62869		3.2577		0.58896
355	1.0000e-07		3.0203		0.70028		7.4538		0.63296		3.2859		0.59337
360	1.0000e-08		3.1644		0.65518		6.9882		0.62283		3.5571		0.56907
365	1.0000e-08		3.0734		0.69737		7.1708		0.63151		3.3803		0.58458
370	1.0000e-08		2.9316		0.65626		7.6211		0.64055		3.4540		0.59345
375	1.0000e-08		2.7078		0.65980		6.5739		0.59081		3.9283		0.52608
380	1.0000e-08		2.5602		0.67804		7.6483		0.62510		3.5217		0.57002
385	1.0000e-08		3.7985		0.67826		6.5620		0.61803		3.5684		0.56246
390	1.0000e-08		3.1974		0.65075		6.1082		0.61911		3.7351		0.55863
395	1.0000e-08		3.8034		0.68473		5.8926		0.61571		3.4493		0.57054
400	1.0000e-08		3.5956		0.65981		7.5262		0.63612		3.1801		0.60397
405	1.0000e-08		3.6840		0.66342		7.0657		0.63548		3.3833		0.59247
410	1.0000e-08		3.0346		0.66330		7.1329		0.60951		3.5715		0.55523
415	1.0000e-08		2.7611		0.67104		7.2527		0.61118		3.7475		0.54387
420	1.0000e-08		3.1514		0.68035		6.7731		0.61043		3.7540		0.54292
425	1.0000e-08		2.5763		0.67694		6.8106		0.61446		3.8598		0.55192
430	1.0000e-08		3.0960		0.67924		6.2958		0.60319		3.6749		0.55002
435	1.0000e-08		3.1543		0.67156		6.4250		0.61594		3.6548		0.56201
440	1.0000e-08		2.9982		0.66261		7.3023		0.63205		3.4615		0.58799
445	1.0000e-08		3.0878		0.67791		5.8640		0.61378		3.7751		0.55345
450	1.0000e-08		3.0048		0.67854		7.2339		0.61956		3.4272		0.57647
455	1.0000e-08		3.2584		0.65571		6.4178		0.61903		3.5884		0.55864
460	1.0000e-08		2.8529		0.65388		6.7735		0.63369		3.4214		0.58189
465	1.0000e-08		3.1570		0.67147		6.2171		0.61776		3.6068		0.55884
470	1.0000e-08		3.5563		0.68309		6.5346		0.61470		3.6294		0.56060
475	1.0000e-08		2.9776		0.64780		6.9183		0.60798		3.8948		0.53982
480	1.0000e-08		2.9536		0.67344		6.7515		0.60973		3.7304		0.54703
485	1.0000e-08		3.1439		0.67924		6.4093		0.61576		3.6104		0.56400
490	1.0000e-08		2.6870		0.67488		6.6554		0.61389		3.7165		0.55631
495	1.0000e-08		2.8673		0.66960		6.5233		0.62017		3.4455		0.57213
500	1.0000e-08		3.2358		0.67109		6.6359		0.60862		3.6464		0.55339
505	1.0000e-08		2.9629		0.67707		6.8515		0.63051		3.4470		0.58086
510	1.0000e-08		2.8358		0.67112		6.6970		0.62633		3.4948		0.57623
515	1.0000e-08		2.8094		0.65278		6.0322		0.62100		3.7106		0.56113
520	1.0000e-08		2.8583		0.69080		6.8952		0.60604		3.8458		0.53982
525	1.0000e-08		2.9559		0.65374		6.3849		0.57626		4.4571		0.49458
530	1.0000e-08		2.6638		0.64538		7.1794		0.61645		3.6562		0.55714
535	1.0000e-08		3.2717		0.66159		7.0397		0.62578		3.3612		0.58162
540	1.0000e-08		3.2269		0.67545		6.5274		0.62599		3.4892		0.57730
545	1.0000e-08		2.8661		0.64900		6.8569		0.60637		3.7594		0.54784
550	1.0000e-08		3.3125		0.67162		7.7116		0.61190		3.7107		0.55040
555	1.0000e-08		2.6664		0.67959		6.6440		0.61187		3.7117		0.55194
560	1.0000e-08		2.9994		0.66927		6.6349		0.62478		3.4494		0.57377
565	1.0000e-08		3.4534		0.66417		7.5121		0.60669		3.5896		0.55464
570	1.0000e-08		3.0679		0.66862		7.0463		0.60896		3.6749		0.54801
575	1.0000e-08		3.1479		0.67955		7.1230		0.62732		3.5297		0.57727
580	1.0000e-08		3.0189		0.66015		6.5636		0.60006		3.8618		0.53484
585	1.0000e-08		3.0566		0.67466		7.2083		0.62894		3.3153		0.58910
590	1.0000e-08		3.1056		0.66987		7.7570		0.63582		3.2833		0.59206
595	1.0000e-08		2.9090		0.68300		6.7055		0.62051		3.4693		0.56982
600	1.0000e-08		3.3281		0.67926		6.5243		0.62138		3.5576		0.56454
605	1.0000e-08		3.5622		0.66684		6.7706		0.60864		3.6463		0.55118
610	1.0000e-08		3.1017		0.67569		6.3815		0.61494		3.5120		0.55690
615	1.0000e-08		3.3038		0.66605		6.7881		0.60806		3.5419		0.55209
620	1.0000e-08		3.0138		0.67191		7.0872		0.61643		3.6446		0.55919
625	1.0000e-08		3.3913		0.66351		8.1812		0.63080		3.2728		0.59653
630	1.0000e-08		3.2999		0.65529		6.8838		0.59413		3.8950		0.53080
635	1.0000e-08		2.6258		0.69834		8.3605		0.62016		3.6114		0.55500
640	1.0000e-08		3.0463		0.66778		7.4335		0.61875		3.4084		0.57158
645	1.0000e-08		2.5330		0.65771		6.6649		0.60762		3.6514		0.55156
650	1.0000e-08		3.7244		0.66001		6.9884		0.62451		3.4927		0.57196
655	1.0000e-08		3.7262		0.67374		7.0895		0.61526		3.5443		0.55739
660	1.0000e-08		2.5791		0.65515		6.8058		0.62301		3.4763		0.57196
665	1.0000e-08		3.7975		0.66999		6.6513		0.62207		3.6380		0.56213
670	1.0000e-08		3.0447		0.69514		6.7692		0.63411		3.2335		0.60088
675	1.0000e-08		2.8863		0.69532		6.7588		0.61388		3.5415		0.56338
680	1.0000e-08		3.6625		0.68243		7.4480		0.62059		3.4394		0.57265
685	1.0000e-08		3.1518		0.67848		6.8941		0.62189		3.3709		0.57412
690	1.0000e-08		2.9064		0.66078		6.5657		0.62627		3.4168		0.57880
695	1.0000e-08		2.8272		0.68921		6.6874		0.62298		3.3883		0.58108
700	1.0000e-08		3.2311		0.66754		6.3863		0.61752		3.5237		0.56261
705	1.0000e-08		2.8578		0.68185		7.4398		0.62259		3.3387		0.57941
710	1.0000e-08		2.8888		0.67012		7.1562		0.61161		3.4775		0.56238
715	1.0000e-08		3.6644		0.67515		6.4092		0.62310		3.4552		0.57318
720	1.0000e-08		2.8266		0.64562		6.3948		0.61715		3.5554		0.56907
725	1.0000e-08		3.0500		0.66384		6.3935		0.61250		3.5318		0.56108
730	1.0000e-08		3.0019		0.68714		6.5981		0.60547		3.6025		0.55106
735	1.0000e-08		2.7996		0.67153		6.5510		0.62430		3.5840		0.56883
740	1.0000e-08		3.3442		0.67251		7.0002		0.61666		3.7937		0.55082
745	1.0000e-08		3.1941		0.68490		6.3996		0.61260		3.7376		0.55355
750	1.0000e-08		3.4801		0.68169		6.5717		0.62807		3.4369		0.58569
755	1.0000e-08		3.5590		0.67810		6.6089		0.62020		3.5419		0.56339
760	1.0000e-08		3.1884		0.67688		6.3006		0.62362		3.4202		0.57697
765	1.0000e-08		3.6103		0.68916		6.9421		0.60645		3.5050		0.56122
770	1.0000e-08		2.6842		0.66239		6.5472		0.62164		3.5804		0.56893
775	1.0000e-08		2.9080		0.63776		6.9401		0.62865		3.6351		0.56729
780	1.0000e-08		3.2781		0.68439		6.7947		0.61071		3.7432		0.54904
